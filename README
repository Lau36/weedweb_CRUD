# WeedWebCRUD

## Pasos para correr la aplicación

1. Clonar el repositorio:
    ```bash
    git clone https://github.com/Lau36/weedweb_CRUD.git
    ```

2. Cambiarse a la rama development:
    ```bash
    git checkout development
    ```

3. Crear una base de datos con el nombre y las credenciales deseadas, preferiblemente desde la shell de sql:
    ```sql
    CREATE DATABASE weedweb_CRUD;
    ```

4. En la raíz del proyecto (a la altura de este README), crear un archivo `.env` con las siguientes variables, reemplazando donde sea necesario:
    ```dotenv
    JWT_SECRET=<Número de 8 dígitos>
    JWT_SECRET_REFRESH=<Número de 4 dígitos>
    DB_NAME=<nombre de la base de datos creada>
    DB_PASSWORD=<contraseña de postgres>
    DB_HOST=<Host de su base de datos>
    DB_USER=<Usuario de la base de datos>
    PORT=<Puerto en el que correrá la aplicación>
    ```

5. Instalar dependencias y ejecutar la aplicación:
    ```bash
    npm install
    npm run dev
    ```

6. Para probar los endpoints, se recomienda usar Postman o Insomnia:

    - Crear persona: `http://localhost:4000/users/api/person`
    - Crear empresa: `http://localhost:4000/users/api/company`
    - Logearse: `http://localhost:4000/users/api/SignIn`
    - Refrescar token: `http://localhost:4000/users/api/tokenRefresh`
    - Cerrar sesión: `http://localhost:4000/users/api/logout`
    - Actualizar persona por ID: `http://localhost:4000/users/api/user/id`
    - Actualizar empresa por ID: `http://localhost:4000/users/api/company/id`
    - Info de usuario por ID: `http://localhost:4000/users/api/id`

### Notas adicionales para algunos endpoints:

- Para los endpoints de actualizar usuarios y de ver info de usuario por ID, es necesario enviar el token de acceso en los headers:
    - En el header `token: <El token de acceso generado en el login>`
    - `Authorization: <El token de acceso generado en el login>`, recuerde que este token es de tipo bearer token

- Para el endpoint del token de refresco, es necesario pasar el token de refresco en los headers y no el de acceso.
